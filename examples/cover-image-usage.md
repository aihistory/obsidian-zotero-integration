# 封面图片功能使用示例

## 基本使用流程

### 1. 配置设置

首先在 Obsidian 中配置封面图片设置：

1. 打开 Obsidian 设置
2. 找到 "Zotero Integration" 插件
3. 在设置页面中找到 "封面图片设置" 部分
4. 配置以下选项：

```yaml
# 基本设置
保存图片附件: ✅ 启用
附件存放位置: assets/books
保存高清封面: ✅ 启用

# 图床设置（可选）
使用附件图床: ❌ 禁用
选择图床类型: PicGo
PicGo上传Url: http://127.0.0.1:36677/upload
```

### 2. 导入 Zotero 数据

使用插件的导入功能：

1. 打开命令面板（Ctrl/Cmd + Shift + P）
2. 搜索 "Zotero Integration: Import notes"
3. 选择要导入的 Zotero 项目
4. 插件会自动处理封面图片

### 3. 查看结果

导入完成后，你会看到：

- 生成的 Markdown 文件包含封面图片
- 封面图片保存在指定的文件夹中
- 文件结构类似：

```
assets/books/
├── smith2024_人工智能导论_cover.jpg
└── jones2023_机器学习基础_cover.jpg
```

## 高级配置示例

### 示例 1：使用图床上传

```yaml
# 启用图床功能
保存图片附件: ✅ 启用
使用附件图床: ✅ 启用
选择图床类型: PicGo
PicGo上传Url: http://127.0.0.1:36677/upload
```

这样封面图片会上传到图床，Markdown 中使用图床 URL。

### 示例 2：自定义文件夹结构

```yaml
# 自定义文件夹结构
附件存放位置: {{myType}}/{{year}}/{{citekey}}
```

生成的文件结构：
```
assets/
├── book/
│   └── 2024/
│       └── smith2024_人工智能导论_cover.jpg
└── article/
    └── 2023/
        └── jones2023_机器学习基础_cover.jpg
```

### 示例 3：仅本地保存

```yaml
# 仅本地保存，不上传图床
保存图片附件: ✅ 启用
使用附件图床: ❌ 禁用
附件存放位置: covers
保存高清封面: ✅ 启用
```

## 模板变量支持

在 "附件存放位置" 中可以使用以下模板变量：

- `{{citekey}}` - Zotero 引用键
- `{{title}}` - 项目标题
- `{{myType}}` - 项目类型
- `{{year}}` - 出版年份
- `{{author}}` - 作者姓名

### 模板示例

```yaml
# 按年份和类型组织
附件存放位置: {{myType}}/{{year}}

# 按作者组织
附件存放位置: authors/{{author}}

# 复杂结构
附件存放位置: {{myType}}/{{year}}/{{citekey}}_covers
```

## 故障排除示例

### 问题 1：封面下载失败

**症状**：导入后没有封面图片

**解决方案**：
1. 检查网络连接
2. 验证 Zotero 项目是否有图片附件
3. 查看控制台错误信息

### 问题 2：图床上传失败

**症状**：图床功能启用但上传失败

**解决方案**：
1. 确认 PicGo 软件已启动
2. 检查 PicGo 服务地址是否正确
3. 测试 PicGo 连接：

```bash
curl -X POST http://127.0.0.1:36677/upload
```

### 问题 3：文件权限错误

**症状**：无法保存封面图片

**解决方案**：
1. 检查 Obsidian 文件权限
2. 确认目标文件夹可写
3. 尝试使用绝对路径

## 最佳实践

### 1. 文件夹组织

推荐的文件组织方式：

```yaml
# 按类型和年份组织
附件存放位置: {{myType}}/{{year}}

# 或者按项目组织
附件存放位置: projects/{{citekey}}
```

### 2. 图床使用

- 使用图床可以减少本地存储占用
- 确保图床服务稳定可靠
- 定期备份重要的封面图片

### 3. 性能优化

- 对于大量项目，考虑分批导入
- 定期清理不需要的封面图片
- 使用 SSD 存储提高访问速度

### 4. 备份策略

- 重要的封面图片建议本地保存
- 定期备份封面图片文件夹
- 考虑使用云存储同步

## 常见用例

### 学术论文管理

```yaml
# 学术论文的封面设置
附件存放位置: papers/{{year}}/{{citekey}}
保存高清封面: ✅ 启用
使用附件图床: ❌ 禁用
```

### 图书收藏

```yaml
# 图书收藏的封面设置
附件存放位置: books/{{author}}/{{year}}
保存高清封面: ✅ 启用
使用附件图床: ✅ 启用
```

### 研究项目

```yaml
# 研究项目的封面设置
附件存放位置: research/{{myType}}/{{citekey}}
保存高清封面: ✅ 启用
使用附件图床: ❌ 禁用
```
